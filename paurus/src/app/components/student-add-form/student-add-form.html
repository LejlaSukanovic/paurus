<div class="student-add-container">
  <p-card class="student-add-card" header="Add Student">
    <form [formGroup]="studentForm" (ngSubmit)="onSubmit()" class="student-form">
      <div class="form-section">
        <h3 class="section-title">Personal Information</h3>
        <div class="form-grid">
          <div class="form-field">
            <label for="firstName" class="required">First Name</label>
            <input pInputText id="firstName" formControlName="firstName" placeholder="Enter first name" />
          </div>

          <div class="form-field">
            <label for="lastName" class="required">Last Name</label>
            <input pInputText id="lastName" formControlName="lastName" placeholder="Enter last name" />
          </div>

          <div class="form-field">
            <label for="email" class="required">Email</label>
            <input pInputText id="email" type="email" formControlName="email" placeholder="Enter email address" />
          </div>

          <div class="form-field">
            <label for="dateOfBirth" class="required">Date of Birth</label>
            <p-datepicker
              id="dateOfBirth"
              formControlName="dateOfBirth"
              dateFormat="yy-mm-dd"
              placeholder="Select date of birth"
            ></p-datepicker>
          </div>

          <div class="form-field">
            <label for="phone">Phone</label>
            <input pInputText id="phone" formControlName="phone" placeholder="Enter phone number" />
          </div>

          <div class="form-field">
            <label for="address">Address</label>
            <input pInputText id="address" formControlName="address" placeholder="Enter address" />
          </div>

          <div class="form-field">
            <label for="enrollmentDate" class="required">Enrollment Date</label>
            <p-datepicker
              id="enrollmentDate"
              formControlName="enrollmentDate"
              dateFormat="yy-mm-dd"
              placeholder="Select enrollment date"
            ></p-datepicker>
          </div>

          <div class="form-field">
            <label for="major">Major</label>
            <input pInputText id="major" formControlName="major" placeholder="Enter major" />
          </div>
        </div>
      </div>

      <p-divider class="form-divider"></p-divider>

      <div class="form-section">
        <h3 class="section-title">Courses (Optional)</h3>
        <div class="courses-section" formArrayName="courses">
          @if (courses.controls.length > 0) {
            <div *ngFor="let course of courses.controls; let i = index" [formGroupName]="i" class="course-item">
              <div class="course-form-row">
                <div class="form-field">
                  <label for="courseTitle{{i}}">Course Title</label>
                  <input
                    pInputText
                    id="courseTitle{{i}}"
                    placeholder="Enter course title"
                    formControlName="title"
                  />
                </div>
                <div class="form-field">
                  <label for="courseCredits{{i}}">Credits</label>
                  <p-inputNumber
                    id="courseCredits{{i}}"
                    formControlName="credits"
                    [min]="0"
                    [max]="10"
                    placeholder="Credits"
                  ></p-inputNumber>
                </div>
                <button
                  pButton
                  type="button"
                  label="Remove"
                  icon="pi pi-times"
                  class="remove-course-btn"
                  (click)="removeCourse(i)"
                ></button>
              </div>
            </div>
          } @else {
            <div class="no-courses-message">
              No courses added yet. Click "Add Course" to get started.
            </div>
          }

          <button
            pButton
            type="button"
            label="Add Course"
            icon="pi pi-plus"
            class="add-course-btn"
            (click)="addCourse()"
          ></button>
        </div>
      </div>

      <button
        pButton
        type="submit"
        label="Create Student"
        icon="pi pi-check"
        class="submit-btn"
        [disabled]="studentForm.invalid"
      ></button>
    </form>
  </p-card>
</div>
